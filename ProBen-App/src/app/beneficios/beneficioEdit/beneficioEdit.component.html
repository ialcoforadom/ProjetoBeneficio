<app-titulo [titulo]="titulo"></app-titulo>
<form [formGroup]="registerForm">
  <div class="row">
    <div class="col-md-8">
      <tabset>
        <tab heading="Benefício">
          <div class="form-row">
            <div class="form-group col-md-12">
              <label>Nome</label>
              <input type="text" class="form-control" [(ngModel)]="beneficio.nome"
              [ngClass]="{'is-invalid': registerForm.get('nome')!.errors && registerForm.get('nome')!.touched}"
              formControlName="nome" placeholder="Insira o Nome">
              <div *ngIf="registerForm.get('nome')!.hasError('required')
              && registerForm.get('nome')!.touched" class="invalid-feedback">
              Nome é obrigatório.
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-12">
            <label>Data de Criação: </label>
            <input type="text" class="form-control" 
            bsDatepicker
            value="{{'dataCriacao'}}" [(ngModel)]="beneficio.dataCriacao"
            [ngClass]="{'is-invalid': registerForm.get('dataCriacao')!.errors 
            && registerForm.get('dataCriacao')!.touched}" formControlName="dataCriacao" placeholder="Insira a data de criação">
            <div class="invalid-feedback">
              Data de criação é obrigatória.
            </div>
          </div>
        </div>
      </tab>
      <tab heading="Servidores">
        <div>
          <div formArrayName="servidores" *ngFor="let servidor of servidores.controls; let i=index">
            <fieldset [formGroupName]="i" class="form-group">
              <legend class="d-flex justify-content-between capitalize">
                {{ 'Servidor' }}
                <button class="btn btn-sm btn-warning mb-1" (click)="removerServidor(i)">remove</button>
              </legend>
              <div class="form-row">
                <div class="form-group col-md-12">
                  <label>Nome: </label>
                  <input type="text" class="form-control" formControlName="nome" placeholder="Insira o nome">
                  <input hidden="true" type="number" #myInput  [(ngModel)]="beneficio.id" class="form-control" formControlName="beneficioId" autofocus>
                </div>
              </div> 
              <div class="form-row">
                <div class="form-group col-md-6">
                  <label>CPF: </label>
                  <input type="text" class="form-control" formControlName="cpf" placeholder="Insira o CPF">
                </div>
                <div class="form-group col-md-6">
                  <label>Matricula: </label>
                  <input type="number" class="form-control" formControlName="matricula" placeholder="Insira a Matricula">
                </div>
              </div>
              <div class="form-row">
                <div class="form-group col-md-3">
                  <label>Telefone: </label>
                  <input type="text" class="form-control" 
                  formControlName="telefone" placeholder="Insira o Telefone">
                </div>
                <div class="form-group col-md-6">
                  <label>E-mail: </label>
                  <input type="text" class="form-control" formControlName="email" placeholder="Insira o E-mail">
                </div>
                <div class="form-group col-md-3">
                  <label>Data Criação</label>
                  <input type="text" class="form-control" bsDatepicker formControlName="dataCriacao" placeholder="01/01/2019">
                </div> 
              </div>
            </fieldset>
          </div>
          <button (click)="adicionarServidor()" class="btn btn-outline-primary">
            Adicionar Servidor
          </button>
        </div>
      </tab>
      <tab heading="Setores">
        <div>
          <div formArrayName="setores" *ngFor="let setor of setores.controls; let i=index">
            <fieldset [formGroupName]="i" class="form-group">
              <legend class="d-flex justify-content-between capitalize">
                {{'Setores'}}
                <button hidden="true" class="btn btn-sm btn-warning mb-1" (click)="removerSetor(i)">remove</button>
              </legend>
              <div class="row">
                <div class="form-group col-md-4">
                  <label>Nome</label>
                  <input type="text" class="form-control" formControlName="nome" placeholder="Insira o Nome">
                  <input hidden="true" type="number" #myInput  [(ngModel)]="beneficio.id" class="form-control" formControlName="beneficioId" placeholder="Insira o nome" autofocus>
                </div>
                <div class="form-group col-md-4">
                  <label>Data Criação</label>
                  <input type="text" bsDatepicker class="form-control" formControlName="dataCriacao" placeholder="01/01/2019">
                </div>            
              </div>
            </fieldset>
          </div>
          <button hidden="true" (click)="adicionarSetor()" class="btn btn-outline-primary">
            Adicionar Categoria
          </button>
        </div>
      </tab>
      <tab heading="Categorias">
        <div>
          <div formArrayName="categorias" *ngFor="let categoria of categorias.controls; let i=index">
            <fieldset [formGroupName]="i" class="form-group">
              <legend class="d-flex justify-content-between capitalize">
                {{'Categorias'}}
                <button class="btn btn-sm btn-warning mb-1" (click)="removerCategoria(i)">remove</button>
              </legend>
              <div class="row">
                <div class="form-group col-md-4">
                  <label>Nome</label>
                  <input type="text" class="form-control" formControlName="nome" placeholder="Insira o Nome">
                  <input hidden="true" type="number" #myInput  [(ngModel)]="beneficio.id" class="form-control" formControlName="beneficioId" placeholder="Insira o nome" autofocus>
                </div>
                <div class="form-group col-md-4">
                  <label>Data Criação</label>
                  <input type="text" bsDatepicker class="form-control" formControlName="dataCriacao" placeholder="01/01/2019">
                </div>            
              </div>
            </fieldset>
          </div>
          <button (click)="adicionarCategoria()" class="btn btn-outline-primary">
            Adicionar Categoria
          </button>
        </div>
      </tab>
      <tab heading="Tramites">
        <div>
          <div formArrayName="setores" *ngFor="let setor of setores.controls; let i=index">
            <fieldset [formGroupName]="i" class="form-group">
              <legend class="d-flex justify-content-between capitalize">
                {{'Tramitar'}}
              </legend>
              <div class="row">
                <div class="form-group col-md-4">
                  <label>Nome</label>
                  <input type="text" class="form-control" formControlName="nome" placeholder="Insira o Nome">
                  <input hidden="true" type="number" #myInput  [(ngModel)]="beneficio.id" class="form-control" formControlName="beneficioId" placeholder="Insira o nome" autofocus>
                </div>
                <div class="form-group col-md-4">
                  <label>Data do Tramite</label>
                  <input type="text" bsDatepicker class="form-control" formControlName="dataCriacao" placeholder="01/01/2019">
                </div>            
              </div>
            </fieldset>
          </div>
          <button (click)="salvarBeneficio()" class="btn btn-outline-primary">
            Tramitar
          </button>
        </div>
      </tab>
    </tabset>
    <div class="row">
      <div class="col-md-12 d-flex justify-content-end">
        <!-- {{registerForm.value | json}} -->
        <button [disabled]="!registerForm.valid" class="btn btn-success my-2" 
        (click)="salvarBeneficio()">Salvar
        Alterações</button>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="form-row">
      <div class="form-group col-md-9">
      </div>
    </div>
    <div class="card profile-card-2">
      <div class="card-img-block">
        <object ng-show="content" [data]="imagemUrl" 
        type="application/pdf" style="width: 100%; height: 200px;"></object>
      </div>
      <!--<div class="card-img-block">
        <embed width="100%" height="200px" 
        src="http://localhost:5000/resources/pdfs/{{beneficio.imagemUrl}}"
        type="application/pdf">
      </div>-->
      <div class="card-body pt-3">
        <h4>{{beneficio.nome}}</h4>
        <p class="card-text">
          <b>Data:</b> {{beneficio.dataCriacao}}
        </p>
        <hr>
        <div class="row">
          <!--div class="col-md-4 d-flex justify-content-center">  
            <a href="#" class="btn btn-outline-primary">Participar</a>
          </div-->
        </div>
      </div>
    </div>
  </div>
</div>
</form>